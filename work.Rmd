---
params:
  jira: "HBRA-99"
  github: "github.com"
  confluence: "https://www.atlassian.com/software/confluence"
  title: "Are titles phrased as questions more engaging than statements?"
  logo_url: "https://hbr.org/resources/css/images/HBR_logo_black.svg"
  accent_color: "#c82502"
title: '`r params$title`'
author: '`r Sys.info()[7]`'
date: '`r Sys.time()`'
output: 
  html_document:
    code_folding: hide
    code_download: true
    df_print: paged
    keep_md: true
    toc: true
    toc_float: 
      collapsed: false
      smooth_scroll: false
---

<style>
@import url('https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap');

body {font-family: "Source Sans Pro", sans-serif !important;}
h1, h2, h3, h4, h5 {font-weight: 700 !important; padding-top: 2rem;}
a {color: `r params$accent_color`}
.author, .date {padding-top: 1rem;}
.main-container{max-width: 85% !important;}

/* ---- TOC ---- */
.list-group-item.active, .list-group-item.active:focus, .list-group-item.active:hover {background-color: `r params$accent_color`; border-color: `r params$accent_color`; margin-left: -2rem; padding-left: 2rem;}
.tocify, .nav-tabs > li > a {webkit-border-radius: unset; moz-border-radius: unset; border-radius: unset;}
.tocify::before {background-image: url(`r params$logo_url`); padding: 2rem; display: inline-block; content: ""; width: 100%; height: 100px; background-size: 150px; background-position: center; background-repeat: no-repeat;}
.tocify:nth-child(1) ul:nth-child(1)::before {content: "`r params$title`"; padding-left: .25rem; display: inline-block;}
.tocify ul li:first-of-type {margin-top: 1rem;}
.tocify {padding-top: 2rem; padding-bottom: 2rem;}
.tocify-header {text-indent: unset !important; padding-left: 2rem;}
ul.tocify-header {padding-left: 1rem;}
#tocify-header0 {padding-top: 2rem;}
.nav-tabs {padding-top: 1rem;}

/* diagrammer/mermaid */
/* .DiagrammeR {height: unset !important;} */
.mermaid .node rect, .node circle, .node ellipse, .node polygon {fill: #ebf0f0; stroke: #abafb0;}


summary {padding: 1rem; border: 1px solid #abafb0;}

/* slide stuff */
.noselect {
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome and Opera */
}

.nav-arrow { font-size: 30px; color: `r params$accent_color`; background: white; cursor: pointer; display: block; text-align: center; border-radius: 30px; border: 1px solid lightgrey;}

.fixed-height { max-height: 400px !important; overflow: auto; }

</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.5.1/mermaid.min.js"></script>


## Background

This is my go-to template for work projects. I wanted a notebook with some minimal slide functionality without having to separate/commit whole hog to a separate ioslides output or whatever. Helps maintain flow. 

Don't want a dependency of a theme package, just plain ol HTML/CSS/JS

> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. [^1]


[^1]: footnote

### Plan {.tabset}

Gantt and ER don't work

#### Flowchart
```{r, results="asis"}
htmltools::HTML('
  <div class="mermaid">
  graph LR
      A --- B
      B-->C
      B-->D
  </div>
  ')
```

#### User Journey 
```{r, results="asis"}
htmltools::HTML('
  <div class="mermaid">
journey
    title My working day
    section Go to work
      Make tea: 5: Me
      Go upstairs: 3: Me
      Do work: 1: Me, Cat
    section Go home
      Go downstairs: 5: Me
      Sit down: 5: Me
  </div>
  ')
```

#### Sequence Diagram
```{r, results="asis"}
htmltools::HTML('
  <div class="mermaid">
sequenceDiagram
    participant John
    participant Alice
    Alice->>John: Hello John, how are you?
    John-->>Alice: Great!
  </div>
  ')
```

## Work {.tabset}
Data cleaning and stuff

### a {.fixed-height}
```{r}
knitr::opts_chunk$set(echo = TRUE)
t(t(letters))
```

### b {.fixed-height}
```{r}
knitr::opts_chunk$set(echo = TRUE)
letters
```


## Findings/Recommendations {.tabset}
This section can function as slides if there's not too much to show. See "Slides" for slides within a tab.

### Revenue is up!

```{r cars, cols.print = 3, rows.print = 5}
mtcars
```

### Except on Mars!

```{r pressure, echo=FALSE, out.width="80%"}
plot(pressure)
```


### Slides {.tabset .tabnav}
Can't link to these

<div style="width: 100% !important; padding: 1rem;">
<button class="nav-arrow noselect" style="float:left; width: 50%;" onclick="goBackward()">⟵</button>

<button class="nav-arrow noselect" style="width: 50%;" onclick="goForward()">⟶</button>

</div>

#### `r n <- 1; n` 
As you can see here, the results speak for themselves. 
```{r slide setup, echo=FALSE, warning=FALSE, message=FALSE}
library(plotly); library(ggplot2); library(dplyr); library(glue)

knitr::opts_chunk$set(out.width = "100%")

g <- data.frame(a=1:10, b=sample(1:100, 10)) %>% 
  { ggplot(., aes(x=a, y=b)) + 
      geom_point() + 
      labs(title="My title", subtitle = "Based on data from 2020-01 to 2020-02", caption = "my caption")
  } 

g 
```

#### `r n <- n+1; n`
As you can see here, the results speak for themselves. 
```{r echo=FALSE, warning=FALSE, message=FALSE}
ggplotly(g) %>%
  layout(title = glue("{title}<br><sup>{subtitle}</sup>",
                      title = g$labels$title,
                      subtitle = g$labels$subtitle
                      )                      
         )
```

#### `r n <- n+1; n`
As you can see here, the results speak for themselves. 
```{r echo=FALSE, warning=FALSE, message=FALSE}
data.frame(a=1:10, b=sample(1:100, 10)) %>% { ggplot(., aes(x=a, y=b)) + geom_point()} %>% ggplotly(.)
```


---

## Appendix

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

<details><summary>R Session Info</summary>

```{r}
sessionInfo()
```

</details>

<style>
.footnotes hr {display: none;}
</style>

## Footnotes

<script>
    var config = {
        startOnLoad:true,
        flowchart:{
            useMaxWidth:false,
            htmlLabels:true
        }
    };
    mermaid.initialize(config);
    
function goBackward() {
  let previous = Array.from(document.querySelectorAll(".tabnav > ul.nav > li")).indexOf(document.querySelector(".tabnav > ul.nav > li.active"))-1;
  document.querySelectorAll(".tabnav > ul.nav > li > a")[previous].click()
};

function goForward() {
  document.querySelector(".tabnav > ul.nav > li.active + li > a").click();
};

</script>

